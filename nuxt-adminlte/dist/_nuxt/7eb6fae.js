(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{215:function(t,e,r){"use strict";r.r(e);var o=r(6),n=(r(35),r(42),r(17),r(28),r(41),r(43)),l=r.n(n),c={data:function(){return{}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,o=t.$axios,e.next=3,o.get("admin/roles/".concat(r.id)).then((function(t){return t.data.data}));case 3:return n=e.sent,e.next=6,o.get("admin/features",{params:{list_only:1}}).then((function(t){return t.data.length?t.data.filter((function(t){return t.is_active})):[]}));case 6:return c=e.sent,e.abrupt("return",{features:c,form:new l.a({id:n.id,name:n.name,slug:n.slug,description:n.description,status:n.status}),existingFeatures:n.features});case 8:case"end":return e.stop()}}),e)})))()},methods:{submitFeatureAbility:function(t,e,r){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n.$axios.post("admin/role-features/".concat(n.form.id),{feature:e,ability:r,ability_value:t.target.checked});case 3:(l=o.sent).data.success&&l.data.data.features.length&&(n.existingFeatures=l.data.data.features),o.next=11;break;case 7:o.prev=7,o.t0=o.catch(0),console.log("ERROR SUBMIT ABILITY...",o.t0),n.$toast.error("Error on updating ability!.",{icon:"exclamation-triangle",iconPack:"fontawesome",duration:3e3});case 11:case"end":return o.stop()}}),o,null,[[0,7]])})))()}}},m=(r(354),r(8)),component=Object(m.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content-fluid"},[r("portal",{attrs:{to:"header-title"}},[r("span",[t._v("Role's Features - #"+t._s(t.form.slug||t.form.id))])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"card card-info"},[t._m(0),t._v(" "),r("form",{staticClass:"form-horizontal"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Role")]),t._v(" "),r("div",{staticClass:"col-sm-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",id:"name",placeholder:"Role Name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"name"}})],1)]),t._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Slug")]),t._v(" "),r("div",{staticClass:"col-sm-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.slug,expression:"form.slug"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("role")},attrs:{type:"text",placeholder:"Role"},domProps:{value:t.form.slug},on:{input:function(e){e.target.composing||t.$set(t.form,"slug",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"role"}})],1)]),t._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Status")]),t._v(" "),r("div",{staticClass:"col-sm-8"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.status,expression:"form.status"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"status"},domProps:{checked:Array.isArray(t.form.status)?t._i(t.form.status,null)>-1:t.form.status},on:{change:function(e){var r=t.form.status,o=e.target,n=!!o.checked;if(Array.isArray(r)){var l=t._i(r,null);o.checked?l<0&&t.$set(t.form,"status",r.concat([null])):l>-1&&t.$set(t.form,"status",r.slice(0,l).concat(r.slice(l+1)))}else t.$set(t.form,"status",n)}}}),t._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"status"}},[t._v("Active")]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"status"}})],1)]),t._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-3 col-form-label"},[t._v("Description")]),t._v(" "),r("div",{staticClass:"col-sm-8"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("description")},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}}),t._v(" "),r("has-error",{attrs:{form:t.form,field:"description"}})],1)])])])])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card card-info"},[t._m(1),t._v(" "),r("table",{staticClass:"table"},[t._m(2),t._v(" "),r("tbody",t._l(t.features,(function(e,o){return r("tr",{key:o+"-"+e.slug},[r("td",[t._v(t._s(++o))]),t._v(" "),r("td",[r("div",[r("strong",[t._v(t._s(e.name))])]),t._v(" "),e.description?r("div",{staticClass:"text-muted"},[t._v(t._s(e.description))]):t._e()]),t._v(" "),r("td",{staticClass:"container-abilities"},t._l(e.actions,(function(o,n){return r("div",{key:n+"-"+o,staticClass:"item-abilities"},[r("div",{staticClass:"custom-control custom-switch"},[r("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:n+"-"+e.slug+"-"+o},domProps:{value:n+"-"+e.slug+"-"+o,checked:!!t.existingFeatures.filter((function(t){return t.slug==e.slug}))[0]&&t.existingFeatures.filter((function(t){return t.slug==e.slug}))[0].pivot.abilities[o]},on:{change:function(r){return t.submitFeatureAbility(r,e.slug,o)}}}),t._v(" "),r("label",{staticClass:"custom-control-label",attrs:{for:n+"-"+e.slug+"-"+o}},[t._v(t._s(o))])])])})),0)])})),0)])])])])],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[t._v("Role")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header"},[r("div",{staticClass:"card-title"},[t._v("Features")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("th",[t._v("No.")]),t._v(" "),r("th",[t._v("Feature")]),t._v(" "),r("th",[t._v("Abilities")])])}],!1,null,"35b178d5",null);e.default=component.exports},349:function(t,e,r){var content=r(355);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(24).default)("8f3b55d8",content,!0,{sourceMap:!1})},354:function(t,e,r){"use strict";r(349)},355:function(t,e,r){var o=r(23)(!1);o.push([t.i,".container-abilities[data-v-35b178d5]{display:flex}.item-abilities[data-v-35b178d5]{margin-right:1rem}",""]),t.exports=o}}]);