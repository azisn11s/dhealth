(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{351:function(e,t,n){var content=n(359);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(24).default)("2842a601",content,!0,{sourceMap:!1})},358:function(e,t,n){"use strict";n(351)},359:function(e,t,n){var r=n(23)(!1);r.push([e.i,".table-pagination[data-v-e4eaf94e]{margin-top:20px;text-align:right}",""]),e.exports=r},99:function(e,t,n){"use strict";n.r(t);var r=n(6),o=(n(35),n(49),n(210),n(13),n(29),n(30),{data:function(){var e=this;this.$createElement;return{loadingInstance:null,isLoading:!1,columns:[{field:"",key:"a",title:"No.",width:50,align:"center",renderBodyCell:function(t,n){t.row,t.column;var r=t.rowIndex;return(e.pageIndex-1)*e.pageSize+1+r}},{field:"name",key:"b",title:"Fullname",align:"left",sortBy:""},{field:"email",key:"c",title:"Email",align:"left"},{field:"user_id",key:"g",title:"Employee Code",align:"center",renderBodyCell:function(e,t){var n=e.row;e.column,e.rowIndex;return n.employee?n.employee.employee_code:"-"}},{field:"created_at",key:"d",title:"Created At",align:"center",renderBodyCell:function(t,n){var r=t.row,o=t.column;t.rowIndex;return e.$moment(r[o.field]).format("lll")},sortBy:"desc"},{field:"email_verified_at",key:"e",title:"Verified At",align:"center",renderBodyCell:function(t,n){var r=t.row,o=t.column;t.rowIndex;return r[o.field]?e.$moment(r[o.field]).format("lll"):n("i",{class:"text-purple"},["Unverified"])},sortBy:""},{field:"",key:"f",title:"Action",align:"center",renderBodyCell:function(t,n){var r=t.row;t.column,t.rowIndex;return n("div",{class:"btn-group btn-block"},[n("button",{attrs:{type:"button"},class:"btn btn-warning btn-sm",on:{click:function(){return e.$router.push("user/".concat(r.id,"/edit"))}}},[n("i",{class:"fas fa-edit"})]),n("button",{attrs:{type:"button"},class:"btn btn-info btn-sm",on:{click:function(){return e.setDefaultPassword(r.id)}}},[n("i",{class:"fas fa-key"})]),n("button",{attrs:{type:"button"},class:"btn btn-danger btn-sm",on:{click:function(){return e.deleteRow(r.id)}}},[n("i",{class:"fas fa-trash"})])])}}],pageIndex:1,pageSize:10,totalCount:0,tableData:[],searchFilter:"",sortParams:{},sortOption:{sortAlways:!0,sortChange:function(t){Object.keys(t).length&&(e.sortParams=t,e.$nextTick((function(){e.getDataFromApi()})))}}}},methods:{pageNumberChange:function(e){this.pageIndex=e,this.getDataFromApi()},pageSizeChange:function(e){this.pageIndex=1,this.pageSize=e,this.getDataFromApi()},getDataFromApi:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$axios.get("admin/users",{params:{page:e.pageIndex,per_page:e.pageSize,search:e.searchFilter,sort:e.sortParams}});case 4:n=t.sent,data=n.data,e.totalCount=data.total,e.tableData=data.data,e.isLoading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),e.$toast.global.server_error(),e.isLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))()},deleteRow:function(e){var t=this;this.$swal.fire({title:"Sure to delete user?",showCancelButton:!0,confirmButtonText:"Ok, Delete!"}).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r||r.dismiss){n.next=14;break}return t.$nuxt.$loading.start(),n.prev=2,n.next=5,t.$axios.delete("admin/users/".concat(e));case 5:t.$swal.fire("Deleted successfully!","","success"),t.getDataFromApi(),t.$nuxt.$loading.finish(),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),t.$swal.fire("Delete failed!","","danger"),t.$nuxt.$loading.finish();case 14:r&&r.dismiss&&t.$swal.fire("User are not deleted","","info");case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}())},setDefaultPassword:function(e){var t=this;this.$swal.fire({title:"Will use default password ?",showCancelButton:!0,confirmButtonText:"Continue"}).then(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r||r.dismiss){n.next=15;break}return console.log("RESULT",r),t.$nuxt.$loading.start(),n.prev=3,n.next=6,t.$axios.patch("admin/users/".concat(e,"/default-password"));case 6:t.$swal.fire("Password change successfully!","","success"),t.getDataFromApi(),t.$nuxt.$loading.finish(),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),t.$swal.fire("Failed change password!","","danger"),t.$nuxt.$loading.finish();case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}())},exportToExcel:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.$nuxt.$loading.start(),n=e.$axios.create({responseType:"blob"}),t.next=5,n.get("admin/users/export-excel").then((function(e){var t=new Blob([e.data],{type:e.data.type}),n=window.URL.createObjectURL(t),link=document.createElement("a");link.href=n,link.setAttribute("download","user-export.xlsx"),document.body.appendChild(link),link.click(),link.remove(),window.URL.revokeObjectURL(n)}));case 5:e.$nuxt.$loading.finish(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&!t.t0.response.data.success?e.$swal.fire("Gagal, ".concat(t.t0.response.data.message),"","error"):t.t0.response&&422==t.t0.response.data.code?(e.$nextTick((function(){e.form.errors.set(t.t0.response.data.error)})),e.$toast.error("Mohon cek kembali formulir Anda",{icon:"times",iconPack:"fontawesome",duration:5e3})):t.t0.response&&403==t.t0.response.data.code?e.$swal.fire("Gagal, ".concat(t.t0.response.data.error),"","error"):e.$swal.fire("Terjadi kesalahan","Silakan hubungi Admin","error"),e.$nuxt.$loading.finish();case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){this.getDataFromApi()},mounted:function(){}}),l=(n(358),n(8)),component=Object(l.a)(o,(function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"content-fluid"},[r("portal",{attrs:{to:"header-title"}},[r("span",[t._v("User")]),t._v(" "),r("nuxt-link",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"1%"},attrs:{tag:"a",to:"/user/create"}},[r("span",[r("i",{staticClass:"fas fa-user-plus"}),t._v(" Add")])]),t._v(" "),r("button",{staticClass:"btn btn-success",on:{click:function(){e.exportToExcel()}}},[r("span",[r("i",{staticClass:"fas fa-file-excel"}),t._v("  Export to Excel")])])],1),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[t._v("User List")]),t._v(" "),r("div",{staticClass:"card-tools"},[r("div",{staticClass:"input-group input-group-sm",staticStyle:{"max-width":"200px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchFilter,expression:"searchFilter"}],staticClass:"form-control float-right",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.searchFilter},on:{keyup:function(){e._.delay((function(){return e.getDataFromApi()}),1e3)},input:function(e){e.target.composing||(t.searchFilter=e.target.value)}}}),t._v(" "),r("div",{staticClass:"input-group-append"},[r("button",{staticClass:"btn btn-default",attrs:{type:"submit"},on:{click:function(){e.getDataFromApi()}}},[r("i",{staticClass:"fas fa-search"})])])])])]),t._v(" "),r("div",{staticClass:"card-body"},[r("vue-element-loading",{attrs:{active:t.isLoading,"is-full-screen":!1}}),t._v(" "),r("ve-table",{attrs:{columns:t.columns,"table-data":t.tableData,id:"table-container","sort-option":t.sortOption}}),t._v(" "),r("div",{staticClass:"table-pagination"},[r("ve-pagination",{attrs:{total:t.totalCount,"page-index":t.pageIndex,"page-size":t.pageSize,layout:["total","prev","pager","next"]},on:{"on-page-number-change":t.pageNumberChange,"on-page-size-change":t.pageSizeChange}})],1)],1)])])])],1)}),[],!1,null,"e4eaf94e",null);t.default=component.exports}}]);