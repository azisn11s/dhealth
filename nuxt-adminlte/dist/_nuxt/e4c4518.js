(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{214:function(t,r,o){"use strict";o.r(r);var e=o(6),n=(o(35),o(43)),l=o.n(n),c={data:function(){return{form:new l.a({fullname:"",email:"",password:"",password_confirmation:"",role:""})}},asyncData:function(t){return Object(e.a)(regeneratorRuntime.mark((function r(){var o,e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.$axios,r.next=3,o.get("admin/roles",{params:{list_only:!0}});case 3:return e=r.sent,r.abrupt("return",{listOfRoles:e});case 5:case"end":return r.stop()}}),r)})))()},methods:{createUser:function(){var t=this;return Object(e.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$nuxt.$loading.start(),r.prev=1,r.next=4,t.$axios.post("admin/users",t.form);case 4:t.$nuxt.$loading.finish(),t.$router.push("/user"),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("ERROR!!",r.t0),r.t0.response&&422==r.t0.response.status?(t.$nextTick((function(){t.form.errors.set(r.t0.response.data.errors)})),t.$toast.error("".concat(r.t0.response.data.message),{icon:"exclamation-triangle",iconPack:"fontawesome",duration:5e3})):r.t0.response&&403==r.t0.response.status?(o="Action failed.",r.t0.response.data&&(o=r.t0.response.data.message),t.$toast.error("".concat(o),{icon:"exclamation-triangle",iconPack:"fontawesome",duration:4e3})):t.$toast.error("Error on submitting form!.",{icon:"exclamation-triangle",iconPack:"fontawesome",duration:5e3}),t.$nuxt.$loading.finish();case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}},m=o(8),component=Object(m.a)(c,(function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"content-fluid"},[o("portal",{attrs:{to:"header-title"}},[o("span",[t._v("Add User")])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"card card-info"},[t._m(0),t._v(" "),o("form",{staticClass:"form-horizontal",on:{submit:function(r){return r.preventDefault(),t.createUser(r)}}},[o("div",{staticClass:"card-body"},[o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEmail3"}},[t._v("Fullname")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.fullname,expression:"form.fullname"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("fullname")},attrs:{type:"text",id:"fullname",placeholder:"Fullname"},domProps:{value:t.form.fullname},on:{input:function(r){r.target.composing||t.$set(t.form,"fullname",r.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"fullname"}})],1)]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEmail3"}},[t._v("Email")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"email",id:"inputEmail3",placeholder:"Email"},domProps:{value:t.form.email},on:{input:function(r){r.target.composing||t.$set(t.form,"email",r.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"email"}})],1)]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputPassword3"}},[t._v("Password")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",id:"inputPassword3",placeholder:"Password"},domProps:{value:t.form.password},on:{input:function(r){r.target.composing||t.$set(t.form,"password",r.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"password"}})],1)]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"password_confirmation"}},[t._v("Password Confirmation")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password_confirmation")},attrs:{type:"password",id:"password_confirmation",placeholder:"Password Confirmation"},domProps:{value:t.form.password_confirmation},on:{input:function(r){r.target.composing||t.$set(t.form,"password_confirmation",r.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"password_confirmation"}})],1)]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"role"}},[t._v("Role")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.form.role,expression:"form.role"}],staticClass:"form-control",attrs:{id:"role"},on:{change:function(r){var o=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"role",r.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[t._v("---")]),t._v(" "),t._l(t.listOfRoles.data,(function(r,e){return o("option",{key:e,domProps:{value:r.slug}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(r.name)+"\n\t\t\t\t\t\t\t\t\t")])}))],2)])])]),t._v(" "),o("div",{staticClass:"card-footer"},[o("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[t._v("Sign in")]),t._v(" "),o("nuxt-link",{staticClass:"btn btn-default float-right",attrs:{tag:"a",to:"/user"}},[t._v("\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t")])],1)])])])])],1)}),[function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"card-header"},[o("h3",{staticClass:"card-title"},[t._v("New User")])])}],!1,null,null,null);r.default=component.exports}}]);